{
  "Content": "The cf-release v214 was released on July 29, 2015.\n\n**Important:**\n- This release includes a migration that modifies the `events` table. This table may be very large, and the migration may cause the deployment to fail if it takes too long to run. If the migration causes the deployment to fail, the api_z1/0 job will fail to start. If this happens, do not restart the deploy until the migration has finished running. The deploy can be restarted once the `space_id` foreign key constraint has been removed from the `events` table.\n- To avoid the possibility of the migration causing a failure, truncate the `events` table before the deployment starts. The data in the `events` table are considered to be audit and log data, and Cloud Foundry can function if it is removed.\n\n**Contents:**\n- \u003ca href=\"#cc-and-service-broker-apis\"\u003eCC and Service Broker APIs\u003c/a\u003e\n- \u003ca href=\"#runtime\"\u003eRuntime\u003c/a\u003e\n- \u003ca href=\"#buildpacks-and-stacks\"\u003eBuildpacks and Stacks\u003c/a\u003e\n- \u003ca href=\"#routing\"\u003eRouting\u003c/a\u003e\n- \u003ca href=\"#loggregator\"\u003eLoggregator\u003c/a\u003e\n- \u003ca href=\"#internal-components\"\u003eInternal Components\u003c/a\u003e\n- \u003ca href=\"#job-spec-changes\"\u003eJob Spec Changes\u003c/a\u003e\n- \u003ca href=\"#recommended-bosh-release-and-stemcell-versions\"\u003eRecommended BOSH Release and Stemcell Versions\u003c/a\u003e\n- \u003ca href=\"#recommended-diego-version\"\u003eRecommended Diego Version\u003c/a\u003e\n\n## \u003ca name=\"cc-and-service-broker-apis\"\u003e\u003c/a\u003eCC and Service Broker APIs\n\n**CC API Version: 2.33.0**\n\n**Service Broker API Version: 2.6**\n\n#### [Cloud Controller](https://github.com/cloudfoundry/cloud_controller_ng/tree/ff442527f0bee06cb6ea6baa22175905a92fc718)\n- Fixed backwards incompatible ccdb migration introduced in cf-release 213 [details](https://www.pivotaltracker.com/story/show/98701792)\n- [Experimental] Work continues on /v3 and Application Process Types [details](https://www.pivotaltracker.com/epic/show/1334418)\n- [Experimental] Work continues on Private Brokers [details](https://www.pivotaltracker.com/epic/show/1958398)\n- [Experimental] Work continues on Dashboard Clients per Service Instance [details](https://www.pivotaltracker.com/epic/show/1958396)\n- Truncate the billing_events table to complete the deprecation [details](https://www.pivotaltracker.com/story/show/92455198)\n- Support for app instance limit on Org Quota [details](https://www.pivotaltracker.com/story/show/83375624)\n- cloudfoundry/cloud_controller_ng #402: Enlarge Service Keys Credentials [details](https://www.pivotaltracker.com/story/show/98933596)\n- Audit events for service key create and delete [details](https://www.pivotaltracker.com/story/show/97927590)\n- vendor/errors is no longer a submodule [details](https://www.pivotaltracker.com/story/show/98573726)\n- use cf.internal for internal domain for consul [details](https://github.com/cloudfoundry/cloud_controller_ng/commit/0f1b94ee250afdb260c9876adacc960a062c198a)\n- SSH access requires app update access [details](https://www.pivotaltracker.com/story/show/97440718)\n- Create service usage event upon plan update [details](https://www.pivotaltracker.com/story/show/97063372)\n- hm9k fetcher to only select the columns that are needed [details](https://www.pivotaltracker.com/story/show/79026112)\n\n## \u003ca name=\"runtime\"\u003e\u003c/a\u003eRuntime\n\n#### [DEA](https://github.com/cloudfoundry/dea_ng/commits/b74390b2472a6a929807040f4439a30ecb46e699)\n- Fix race condition where DEA was sending heartbeat before UUID had been generated. [details](https://www.pivotaltracker.com/story/show/98842704)\n\n#### [Warden](https://github.com/cloudfoundry/warden/commits/f1f6c1a8a1b23fb377ad89337b67682bbeccfe5d)\n- Use wait-for-lock when invoking iptables. [details](https://www.pivotaltracker.com/story/show/78487348)\n- Keep track of containers when destroy fails. [details](https://github.com/cloudfoundry/warden/commit/4d943549bc9f57a691b804b399820ec05683bfb6)\n\n#### [HM9000](https://github.com/cloudfoundry/hm-workspace/commits/10ddc24c33c955586404dc34e4125daa04a43cd5)\n- Enable pprof. [details](https://www.pivotaltracker.com/story/show/80452428)\n\n## \u003ca name=\"buildpacks-and-stacks\"\u003e\u003c/a\u003eBuildpacks and Stacks\n\n### rootfs\n\nupdated cflinuxfs2 to v1.1.0\n\n#### [v1.1.0](https://github.com/cloudfoundry/stacks/releases/tag/1.1.0)\n\nNotably, this release addresses [USN-2670-1](http://www.ubuntu.com/usn/usn-2670-1/): \"libwmf vulnerabilitites\", which is related to:\n- [CVE-2015-0848](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-0848.html)\n- [CVE-2015-4588](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-4588.html)\n- [CVE-2015-4695](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-4695.html)\n- [CVE-2015-4696](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-4696.html)\n\n### go-buildpack\n\nupdated to v1.5.0 (from v1.4.0)\n\n#### [v1.5.0](https://github.com/cloudfoundry/go-buildpack/releases/tag/v1.5.0)\n- Basic Godeps/Godeps.json validation\n  \n  Note that ./Godeps and .godir are deprecated.\n  \n  (See README.md for additional notes about the Godeps upgrade.)\n- Include current stack in unsupported stack message\n  (https://www.pivotaltracker.com/story/show/98579464)\n- Remove vendored python interpreter\n  (https://www.pivotaltracker.com/story/show/94532204)\n- Defaults for GOMAXPROCS\n- Update godep\n  \n  Includes at least:\n  - 64k line fixes\n  - godep diff\n  - Cross compiled with go 1.4.2 / gox (statically linked)\n- GOPATH \"g\" -\u003e \"go\"\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| go | 1.1.1 | cflinuxfs2 |\n| go | 1.1.2 | cflinuxfs2 |\n| go | 1.2.1 | cflinuxfs2 |\n| go | 1.2.2 | cflinuxfs2 |\n| go | 1.3.2 | cflinuxfs2 |\n| go | 1.3.3 | cflinuxfs2 |\n| go | 1.4.1 | cflinuxfs2 |\n| go | 1.4.2 | cflinuxfs2 |\n\n### nodejs-buildpack\n\nupdated to v1.5.0 (from v1.4.0)\n\n#### [v1.5.0](https://github.com/cloudfoundry/nodejs-buildpack/releases/tag/v1.5.0)\n- remove versions 0.8.x and 0.9.x from manifest\n  (https://www.pivotaltracker.com/story/show/97770112)\n- Include CF built binaries\n  (https://www.pivotaltracker.com/story/show/97136960)\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| node | 0.10.38 | cflinuxfs2 |\n| node | 0.10.40 | cflinuxfs2 |\n| node | 0.11.15 | cflinuxfs2 |\n| node | 0.11.16 | cflinuxfs2 |\n| node | 0.12.6 | cflinuxfs2 |\n| node | 0.12.7 | cflinuxfs2 |\n\n#### [v1.4.2](https://github.com/cloudfoundry/nodejs-buildpack/releases/tag/v1.4.2)\n- Security upgrade to nodejs 0.12.7\n  Add support for node version 0.10.40\n  Remove support for node version 0.10.37\n  (https://www.pivotaltracker.com/story/show/98855140)\n\n#### [v1.4.1](https://github.com/cloudfoundry/nodejs-buildpack/releases/tag/v1.4.1)\n- Security upgrade to nodejs 0.12.6\n  (https://www.pivotaltracker.com/story/show/98683546)\n\n### php-buildpack\n\nupdated to v4.0.0 (from v3.3.0)\n\n#### [v4.0.0](https://github.com/cloudfoundry/php-buildpack/releases/tag/v4.0.0)\n- upgrade PHP 5.6.11, 5.5.27, and 5.4.43\n  (https://www.pivotaltracker.com/story/show/98855368)\n- Package all PHP modules in a single tarball\n  \n  Instead of downloading PHP modules individually, include all modules in a\n  single tarball to make the manifest more manageable.\n  (https://www.pivotaltracker.com/story/show/95473520)\n- Package all httpd modules in a single tarball\n  \n  Instead of downloading httpd modules individually, include all modules\n  in a single tarball to make the manifest more manageable.\n  (https://www.pivotaltracker.com/story/show/95473520)\n- Add nginx 1.9.2, upgrade to 1.6.3; drop 1.7.x\n  (https://www.pivotaltracker.com/story/show/98855608)\n- Include current stack in unsupported stack message\n  (https://www.pivotaltracker.com/story/show/98579464)\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| php | 5.4.42 | cflinuxfs2 |\n| php | 5.4.43 | cflinuxfs2 |\n| php | 5.5.26 | cflinuxfs2 |\n| php | 5.5.27 | cflinuxfs2 |\n| php | 5.6.10 | cflinuxfs2 |\n| php | 5.6.11 | cflinuxfs2 |\n| hhvm | 3.5.0 | cflinuxfs2 |\n| hhvm | 3.5.1 | cflinuxfs2 |\n| hhvm | 3.6.0 | cflinuxfs2 |\n| hhvm | 3.6.1 | cflinuxfs2 |\n| composer | 1.0.0-alpha10 | cflinuxfs2 |\n| httpd | 2.4.12 | cflinuxfs2 |\n| newrelic | 4.20.2.95 | cflinuxfs2 |\n| nginx | 1.6.3 | cflinuxfs2 |\n| nginx | 1.8.0 | cflinuxfs2 |\n| nginx | 1.9.2 | cflinuxfs2 |\n\n#### [v3.3.1](https://github.com/cloudfoundry/php-buildpack/releases/tag/v3.3.1)\n- Include php versions 5.6.10, 5.5.26, 5.4.42\n  Remove support for 5.4.39, 5.5.23, 5.6.7\n  Change the default PHP version to 5.5.26\n  (https://www.pivotaltracker.com/story/show/98547428)\n- Support nginx 1.8\n  (https://www.pivotaltracker.com/story/show/96911902)\n- Fix boolean values in options.json\n  (https://www.pivotaltracker.com/story/show/98199628)\n\n### python-buildpack\n\nupdated to v1.5.0 (from v1.4.0)\n\n#### [v1.5.0](https://github.com/cloudfoundry/python-buildpack/releases/tag/v1.5.0)\n- Include CF built binaries\n  (https://www.pivotaltracker.com/story/show/97136960)\n- Include current stack in unsupported stack message\n  (https://www.pivotaltracker.com/story/show/98579464)\n- Update pip to 7.1.0\n- Update setuptools to 18.0.1\n- Set xtrace if $BUILDPACK_XTRACE set\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| python | 2.7.10 | cflinuxfs2 |\n| python | 2.7.9 | cflinuxfs2 |\n| python | 3.3.5 | cflinuxfs2 |\n| python | 3.3.6 | cflinuxfs2 |\n| python | 3.4.2 | cflinuxfs2 |\n| python | 3.4.3 | cflinuxfs2 |\n| libffi | 3.1 | cflinuxfs2 |\n| libmemcache | 1.0.18 | cflinuxfs2 |\n\n### ruby-buildpack\n\nupdated to v1.6.1 (from v1.5.0)\n\n#### [v1.6.1](https://github.com/cloudfoundry/ruby-buildpack/releases/tag/v1.6.1)\n- Fix issues with the 'including unsupported' manifest\n  - Fix incorrect md5 checksum for node version 0.12.7\n  - Remove merge conflict annotations\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| ruby | 2.0.0 | cflinuxfs2 |\n| ruby | 2.1.5 | cflinuxfs2 |\n| ruby | 2.1.6 | cflinuxfs2 |\n| ruby | 2.2.1 | cflinuxfs2 |\n| ruby | 2.2.2 | cflinuxfs2 |\n| jruby | ruby-1.9.3-jruby-1.7.21 | cflinuxfs2 |\n| jruby | ruby-2.0.0-jruby-1.7.21 | cflinuxfs2 |\n| jruby | ruby-2.2.2-jruby-9.0.0.0.rc2 | cflinuxfs2 |\n| node | 0.12.7 | cflinuxfs2 |\n| bundler | 1.9.7 | cflinuxfs2 |\n| libyaml | 0.1.6 | cflinuxfs2 |\n| openjdk1.8-latest | - | cflinuxfs2 |\n| rails3_serve_static_assets | - | cflinuxfs2 |\n| rails_log_stdout | - | cflinuxfs2 |\n\n#### [v1.6.0](https://github.com/cloudfoundry/ruby-buildpack/releases/tag/v1.6.0)\n- Include CF built binaries\n  (https://www.pivotaltracker.com/story/show/97136960)\n\n#### [v1.5.2](https://github.com/cloudfoundry/ruby-buildpack/releases/tag/v1.5.2)\n- Update 1.7.\\* jrubies to 1.7.21 in response to CVE-2015-4020\n  Add support for JRuby 9.0.0.0.rc2\n  Remove support for JRuby 9.0.0.0.rc1\n  (https://www.pivotaltracker.com/story/show/98856174)\n- Add support for node version 0.12.7\n  (https://www.pivotaltracker.com/story/show/98855140)\n\n#### [v1.5.1](https://github.com/cloudfoundry/ruby-buildpack/releases/tag/v1.5.1)\n- Update error message in the event of deploying this buildpack on\n  an unsupported stack\n  (https://www.pivotaltracker.com/story/show/98579464)\n- Security upgrade to NodeJS 0.12.6\n  (https://www.pivotaltracker.com/story/show/98683546)\n- Updating to buildpack-packager v2.2.2\n  Now supports printing out buildpack dependencies via `buildpack-packager list`\n  (https://www.pivotaltracker.com/story/show/98588996)\n- Upgrade JRuby 9000 support to rc1\n  (https://www.pivotaltracker.com/story/show/97566746)\n\n### staticfile-buildpack\n\nupdated to v1.2.1 (from v1.2.0)\n\n#### [v1.2.1](https://github.com/cloudfoundry/staticfile-buildpack/releases/tag/v1.2.1)\n- Adding helpful message for unsupported stack\n  (https://www.pivotaltracker.com/story/show/98579464)\n- Compress nginx response body for more MIME types\n  (https://www.pivotaltracker.com/story/show/98128132)\n- Update nginx to version 1.8.0\n  (https://www.pivotaltracker.com/story/show/97663450)\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| nginx | 1.8.0 | cflinuxfs2 |\n\n## \u003ca name=\"identity\"\u003e\u003c/a\u003eIdentity\n\nNo Changes\n\n## \u003ca name=\"routing\"\u003e\u003c/a\u003eRouting\n- Work continues on support for route services [details](https://www.pivotaltracker.com/epic/show/1884060)\n- Bug fix: Correct context path was not included in cookie returned to client when backend returns JSESSIONID  [details](https://www.pivotaltracker.com/story/show/98068176)\n- Optional routing test suite added to cf-acceptance-tests [details](https://www.pivotaltracker.com/story/show/97654042)\n- Oauth client arguments for rtr CLI changed to --client-id and --client-secret [details](https://www.pivotaltracker.com/story/show/98053306)\n- Submodule name of gorouter and routing api now matches path [details](https://www.pivotaltracker.com/story/show/98754662)\n- Moved two gorouter property defaults into spec file [details](https://www.pivotaltracker.com/story/show/96816978)\n\n## \u003ca name=\"loggregator\"\u003e\u003c/a\u003eLoggregator\n\n[Loggregator Release Tag](https://github.com/cloudfoundry/loggregator/releases/tag/lgr-cf-v214)\n\n#### Loggregator Features\n- Metron refactoring complete, benchmarked at ~30% performance increase. [details](https://www.pivotaltracker.com/story/show/97829092)\n- Metron now uses dropsonde for metrics instead of /varz.  [details](https://www.pivotaltracker.com/story/show/97573376)\n- PR -Add logpath flag support to syslog drain binder. [details](https://github.com/cloudfoundry/loggregator/pull/61)\n- Internal: Improved CI\n  - Cleanup gems during deploy [details](https://www.pivotaltracker.com/story/show/98292936)\n  - Auto-stop pipeline for lost metrics [details](https://www.pivotaltracker.com/story/show/99166090)\n  - Benchmark Metron during CI test [details](https://www.pivotaltracker.com/story/show/99071754)\n  - Steel thread integration suite [details](https://www.pivotaltracker.com/story/show/99165700)\n  - Integration suite test burst performance of metron [details](https://www.pivotaltracker.com/story/show/99319522)\n  - Document build process [details](https://www.pivotaltracker.com/story/show/99317784)\n  - New integration testing for data race conditions [details](https://www.pivotaltracker.com/story/show/99539040)\n  - Parallelize unit tests for performance [details](https://www.pivotaltracker.com/story/show/99471338)\n  - New integration testing for concurrent loads on legacy ports [details](https://www.pivotaltracker.com/story/show/99315896)\n  - General metron pipeline cleanup [details](https://www.pivotaltracker.com/story/show/99260734)\n\n#### Loggregator Bugs\n- Invalid null pointer during TC runtime [details](https://www.pivotaltracker.com/story/show/98353520)\n- PR - Fix format strings [details](https://www.pivotaltracker.com/story/show/98582968)\n\n## \u003ca name=\"internal-components\"\u003e\u003c/a\u003eInternal Components\n\n#### etcd\n\netcd can now be configured to support SSL communication between clients and servers, and amongst etcd servers themselves.  The Diego team currently maintains their own packaging of etcd, but we are in the process of extracting a common etcd-release that can be consumed by both CF and Diego deployments.  The etcd packaging within cf-release has been brought in line with the diego-release packaging to validate that a common etcd-release will work for both deployments.\n- [Diego story for client SSL communication](https://www.pivotaltracker.com/story/show/9446555)\n- [Diego story for peer SSL communication](https://www.pivotaltracker.com/story/show/96141884)\n- [Story to make cf-release etcd packaging compatible with diego-release packaging](https://www.pivotaltracker.com/story/show/98993568)\n\n#### consul\n\nThe cluster management of consul has been made more robust by making sure that consul server nodes have fully synced up with the rest of the cluster before moving on to add another node to the cluster. [details](https://www.pivotaltracker.com/story/show/98998108)\n\n## \u003ca name=\"job-spec-changes\"\u003e\u003c/a\u003eJob Spec Changes\n- Removed `login` job entirely. [details](https://www.pivotaltracker.com/story/show/83616972)\n- Changed `acceptance_tests.oauth_password` to `acceptance_tests.client_secret`. [details](https://www.pivotaltracker.com/story/show/98053306)\n- Changed `acceptance_tests.include_routing_api` to `acceptance_tests.include_routing`. [details](https://www.pivotaltracker.com/story/show/97654042)\n- Added `router.route_service_secret` and `router.route_service_timeout`. [details](https://www.pivotaltracker.com/story/show/96034116)\n- Changed default value for `uaa.zones.internal.hostnames` from `[uaa.service.consul]` to `[uaa.service.cf.internal]`.[details](https://www.pivotaltracker.com/story/show/99062314)\n- Added `login.saml.signMetaData` and `login.saml.signRequest`.\n- Changed `etcd.machines` to be a list of addresses instead of just a list of IPs, and added `etcd.require_ssl`, `etcd.ca_cert`, `etcd.server_cert`, `etcd.server_key`, `etcd.client_cert`, `etcd.client_key`, `etcd.peer_require_ssl`, `etcd.peer_ca_cert`, `etcd.peer_cert`, `etcd.peer_key` to support SSL for all communication between etcd clients and servers, and amongst etcd servers. [diego client SSL story](https://www.pivotaltracker.com/story/show/94465558) [diego peer SSL story](https://www.pivotaltracker.com/story/show/96141884) [cf compatibility story](https://www.pivotaltracker.com/story/show/98993568)\n- Added `consul.agent.sync_timeout_in_seconds`. [details](https://www.pivotaltracker.com/story/show/98998108)\n\n## \u003ca name=\"recommended-bosh-release-and-stemcell-versions\"\u003e\u003c/a\u003eRecommended BOSH Release and Stemcell Versions\n- BOSH Release Version:\n  bosh 176\n- BOSH Stemcell Version:\n\n```\n  name: small_z1\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: small_z2\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: medium_z1\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: medium_z2\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: large_z1\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: large_z2\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: runner_z1\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: runner_z2\n    name: bosh-aws-xen-ubuntu-trusty-go_agent\n    version: 3026\n  name: router_z1\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: router_z2\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: small_errand\n    name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent\n    version: 3026\n  name: xlarge_errand\n    name: bosh-aws-xen-ubuntu-trusty-go_agent\n    version: 3026\n```\n\nThese are soft recommendations; several different versions of the BOSH release and stemcell are likely to work fine.  In future deployments, we will be migrating all Runner VMs to the new HVM instance types.\n\n## \u003ca name=\"recommended-diego-version\"\u003e\u003c/a\u003eRecommended Diego Version\n\nDiego final release [0.1398.0](https://github.com/cloudfoundry-incubator/diego-release/tree/0.1398.0) Â· [release notes](https://github.com/cloudfoundry-incubator/diego-release/releases/tag/0.1398.0)\n"
}